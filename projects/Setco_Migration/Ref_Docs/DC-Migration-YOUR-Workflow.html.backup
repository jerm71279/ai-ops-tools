<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>DC Migration - Your Workflow (5 Phases)</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <link href="data:application/octet-stream;base64,Ym9keSB7CiAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICBtYXgtd2lkdGg6IDEyMDBweDsKICAgIG1hcmdpbjogMCBhdXRvOwogICAgcGFkZGluZzogMjBweDsKICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgICBjb2xvcjogIzMzMzsKICAgIGxpbmUtaGVpZ2h0OiAxLjY7Cn0KaDEgewogICAgY29sb3I6ICMwMDY2Y2M7CiAgICBib3JkZXItYm90dG9tOiAzcHggc29saWQgIzAwNjZjYzsKICAgIHBhZGRpbmctYm90dG9tOiAxMHB4Owp9CmgyIHsKICAgIGNvbG9yOiAjMDA4OGNjOwogICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlMGUwZTA7CiAgICBwYWRkaW5nLWJvdHRvbTogOHB4OwogICAgbWFyZ2luLXRvcDogMzBweDsKfQpoMyB7CiAgICBjb2xvcjogIzU1NTsKICAgIG1hcmdpbi10b3A6IDI1cHg7Cn0KY29kZSB7CiAgICBiYWNrZ3JvdW5kOiAjMmQyZDJkOwogICAgY29sb3I6ICNmOGY4ZjI7CiAgICBwYWRkaW5nOiAycHggNnB4OwogICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgZm9udC1mYW1pbHk6ICdDb25zb2xhcycsICdNb25hY28nLCBtb25vc3BhY2U7Cn0KcHJlIHsKICAgIGJhY2tncm91bmQ6ICMyZDJkMmQ7CiAgICBjb2xvcjogI2Y4ZjhmMjsKICAgIHBhZGRpbmc6IDE1cHg7CiAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICBvdmVyZmxvdy14OiBhdXRvOwogICAgbGluZS1oZWlnaHQ6IDEuNTsKfQpwcmUgY29kZSB7CiAgICBiYWNrZ3JvdW5kOiBub25lOwogICAgcGFkZGluZzogMDsKfQp1bCwgb2wgewogICAgbGluZS1oZWlnaHQ6IDEuODsKfQp0YWJsZSB7CiAgICB3aWR0aDogMTAwJTsKICAgIGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7CiAgICBtYXJnaW46IDE1cHggMDsKICAgIGJhY2tncm91bmQ6IHdoaXRlOwp9CnRhYmxlIHRoIHsKICAgIGJhY2tncm91bmQ6ICMwMDY2Y2M7CiAgICBjb2xvcjogd2hpdGU7CiAgICBwYWRkaW5nOiAxMnB4OwogICAgdGV4dC1hbGlnbjogbGVmdDsKfQp0YWJsZSB0ZCB7CiAgICBwYWRkaW5nOiAxMHB4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7Cn0KdGFibGUgdHI6aG92ZXIgewogICAgYmFja2dyb3VuZDogI2Y1ZjVmNTsKfQpibG9ja3F1b3RlIHsKICAgIGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzAwNjZjYzsKICAgIHBhZGRpbmctbGVmdDogMTVweDsKICAgIGNvbG9yOiAjNjY2OwogICAgZm9udC1zdHlsZTogaXRhbGljOwp9Ci50YXNrLWxpc3QgewogICAgbGlzdC1zdHlsZTogbm9uZTsKfQoudGFzay1saXN0IGxpIHsKICAgIG1hcmdpbjogNXB4IDA7Cn0K" rel="stylesheet" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">DC Migration - Your Workflow (5 Phases)</h1>
</header>
<h1 id="dc-migration---your-workflow-destination-tenant-owner">DC
Migration - YOUR Workflow (Destination Tenant Owner)</h1>
<h2 id="step-by-step-process---what-you-do">Step-by-Step Process - What
YOU Do</h2>
<hr />
<h2 id="your-situation">üéØ Your Situation</h2>
<p><strong>YOU Control:</strong> - ‚úÖ Destination Azure Tenant - ‚úÖ File
Server (FS) in destination tenant - ‚úÖ Remote access to Source DC via
NinjaOne - ‚úÖ Ability to run robocopy from DC - ‚úÖ Final control over
new DC build</p>
<p><strong>Vendor Controls:</strong> - üîí Source Azure Tenant (where
current DC resides) - üîí Azure Portal access to export VHD</p>
<p><strong>YOU Will Do:</strong> - ‚úÖ Connect to DC via NinjaOne - ‚úÖ
Map FS drive to DC - ‚úÖ Run robocopy from DC to FS - ‚úÖ All destination
tenant activities</p>
<hr />
<h2 id="your-5-phase-process">üìã Your 5-Phase Process</h2>
<pre><code>Phase 1: YOU Run Robocopy (DC ‚Üí Your FS via NinjaOne)
         ‚Üì
Phase 2: YOU Copy OS VHD from Vendor Storage to Yours
         ‚Üì
Phase 3: YOU Create Data Disk from FS Snapshot (Post-Robocopy)
         ‚Üì
Phase 4: YOU Build New DC from Both Disks
         ‚Üì
Phase 5: Configure File Shares &amp; Validate</code></pre>
<p><strong>Note:</strong> Infrastructure (VNet, Subnet, NIC) already
exists - no setup needed!</p>
<hr />
<h2 id="phase-1-run-robocopy-from-dc-to-your-fs">PHASE 1: Run Robocopy
from DC to Your FS</h2>
<h3 id="you-will-do-this-via-ninjaone">YOU Will Do This via
NinjaOne:</h3>
<h4 id="connect-to-source-dc">1.1 Connect to Source DC</h4>
<p><strong>Via NinjaOne:</strong> 1. Open NinjaOne console 2. Find
source DC in device list 3. Click ‚ÄúRemote Control‚Äù or ‚ÄúTake Control‚Äù 4.
Open CMD or PowerShell as Administrator</p>
<h4 id="prepare-your-fs">1.2 Prepare Your FS</h4>
<p><strong>On your FS in destination tenant (via RDP or
console):</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create staging folder</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">New-Item</span> <span class="op">-</span>Path <span class="st">&quot;F:\Backup&quot;</span> <span class="op">-</span>ItemType Directory <span class="op">-</span>Force</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify FS is accessible from DC</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Note your FS IP or hostname</span></span></code></pre></div>
<p><strong>FS Access Details:</strong> - Hostname:
<code>FS-SERVERNAME</code> (or IP: <code>10.x.x.x</code>) - Share:
<code>F$</code> (admin share) - Path:
<code>\\FS-SERVERNAME\F$\Backup</code></p>
<h4 id="map-fs-drive-on-dc">1.3 Map FS Drive on DC</h4>
<p><strong>On Source DC (via NinjaOne), run CMD as
Administrator:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a># Map Y: drive to your FS</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>net use Y: \\FS-SERVERNAME\F$ <span class="at">/user:</span>DESTINATION\Administrator</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a># Enter password when prompted</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a># Or use IP if DNS doesn&#39;t resolve:</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>net use Y: \\10.x.x.x\F$ <span class="at">/user:</span>DESTINATION\Administrator</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a># Verify mapping</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="bu">dir</span> Y:\Backup</span></code></pre></div>
<h4 id="run-robocopy">1.4 Run Robocopy</h4>
<p><strong>Still on Source DC via NinjaOne:</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a># Create logs folder</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">mkdir</span> C:\Logs</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a># Run robocopy - copy E:\ to your FS</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>robocopy E:\ Y:\Backup <span class="at">/MIR</span> <span class="at">/COPYALL</span> <span class="at">/DCOPY:</span>T <span class="at">/MT:</span>32 <span class="at">/R:</span>3 <span class="at">/W:</span>5 <span class="at">/B</span> <span class="at">/LOG:</span>C:\Logs\robocopy.log <span class="at">/TEE</span> <span class="at">/NP</span></span></code></pre></div>
<p><strong>Command Breakdown:</strong> - <code>E:\</code> - Source (DC‚Äôs
data drive) - <code>Y:\Backup</code> - Destination (mapped to your FS) -
<code>/MIR</code> - Mirror (exact copy) - <code>/COPYALL</code> - Copy
all attributes, permissions, timestamps - <code>/DCOPY:T</code> - Copy
directory timestamps - <code>/MT:32</code> - Use 32 threads (fast!) -
<code>/R:3</code> - Retry 3 times on errors - <code>/W:5</code> - Wait 5
seconds between retries - <code>/B</code> - Backup mode (bypasses
permissions) - <code>/LOG:</code> - Save log to C:.log -
<code>/TEE</code> - Show on screen AND save to log - <code>/NP</code> -
No percentage (cleaner output)</p>
<h4 id="monitor-progress">1.5 Monitor Progress</h4>
<p><strong>On DC (via NinjaOne) - open second CMD window:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a># Watch log in real<span class="at">-time</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>powershell <span class="at">-command</span> <span class="st">&quot;Get-Content C:\Logs\robocopy.log -Tail 50 -Wait&quot;</span></span></code></pre></div>
<p><strong>Or check from your FS:</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor data arriving</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span><span class="va">$true</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">$size</span> <span class="op">=</span> <span class="op">(</span><span class="fu">Get-ChildItem</span> F<span class="op">:</span>\Backup <span class="op">-</span>Recurse <span class="op">-</span>ErrorAction SilentlyContinue <span class="op">|</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">Measure-Object</span> <span class="op">-</span>Property Length <span class="op">-</span>Sum<span class="op">).</span><span class="fu">Sum</span> <span class="op">/</span> 1GB</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Write-Host</span> <span class="st">&quot;$(Get-Date -Format &#39;HH:mm:ss&#39;) - Size: $([math]::Round($size,2)) GB&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Start-Sleep</span> <span class="op">-</span>Seconds 300  <span class="co"># Check every 5 minutes</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="checklist">Checklist:</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Connected to DC via
NinjaOne</label></li>
<li><label><input type="checkbox"></input>F:created on FS</label></li>
<li><label><input type="checkbox"></input>Y: drive mapped successfully on
DC</label></li>
<li><label><input type="checkbox"></input>Robocopy command
started</label></li>
<li><label><input type="checkbox"></input>Can see progress in log</label></li>
<li><label><input type="checkbox"></input>Monitor until complete</label></li>
<li><label><input type="checkbox"></input><strong>Robocopy complete: ___
files, ___ GB</strong></label></li>
</ul>
<p><strong>‚è±Ô∏è Estimated Time:</strong> 6-12 hours for ~380GB</p>
<p><strong>üí° Pro Tip:</strong> Leave NinjaOne session open or check
back periodically. Robocopy will continue even if you disconnect.</p>
<hr />
<h2 id="phase-2-copy-os-vhd-from-vendor-storage">PHASE 2: Copy OS VHD
from Vendor Storage</h2>
<h3 id="vendors-role-they-do-this">Vendor‚Äôs Role (They Do This):</h3>
<p>The vendor will: 1. Stop/deallocate source DC in their Azure portal
2. Create snapshot of OS disk 3. Export snapshot to VHD blob in their
storage 4. Generate SAS URL with read permissions 5. Provide you the SAS
URL</p>
<p><strong>You will then copy the VHD from their storage to
yours.</strong></p>
<h3 id="your-actions">Your Actions:</h3>
<h4 id="get-vhd-sas-url-from-vendor">2.1 Get VHD SAS URL from
Vendor</h4>
<p><strong>Request from vendor:</strong></p>
<pre><code>Hi [Vendor],

Please export the SETCO-DC02 OS disk as VHD and provide a SAS URL.

We need:
- VHD of OS disk (C: drive)
- SAS URL with read permissions (sp=r)
- Valid for at least 7 days

Please send the full blob URL with SAS token.

Thanks!</code></pre>
<p><strong>Vendor will provide something like:</strong></p>
<pre><code>https://vendorstorage.blob.core.windows.net/exports/setco-dc02-os.vhd?sp=r&amp;st=2025-11-23T00:00:00Z&amp;se=2025-11-30T00:00:00Z&amp;spr=https&amp;sv=2022-11-02&amp;sr=b&amp;sig=...</code></pre>
<h4 id="copy-vhd-from-vendor-storage-to-your-storage">2.2 Copy VHD from
Vendor Storage to Your Storage</h4>
<p><strong>You need your own storage account and container first (if not
exists):</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if you have storage account (skip if exists)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> storage account list <span class="at">-g</span> DataCenter <span class="at">--query</span> <span class="st">&quot;[].name&quot;</span> <span class="at">-o</span> table</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># If you need to create one:</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> storage account create <span class="dt">\</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> setcodcvhdstorage <span class="dt">\</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--resource-group</span> DataCenter <span class="dt">\</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--location</span> eastus <span class="dt">\</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Standard_LRS</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create container for VHD</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> storage container create <span class="dt">\</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">--account-name</span> setcodcvhdstorage <span class="dt">\</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> vhd-import <span class="dt">\</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">--auth-mode</span> login</span></code></pre></div>
<p><strong>Copy VHD using AzCopy:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set variables</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="va">VENDOR_VHD_URL</span><span class="op">=</span><span class="st">&quot;&lt;VHD_URL&gt;&quot;</span>  <span class="co"># SAS URL from vendor</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="va">YOUR_STORAGE_ACCOUNT</span><span class="op">=</span><span class="st">&quot;setcodcvhdstorage&quot;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="va">YOUR_CONTAINER</span><span class="op">=</span><span class="st">&quot;vhd-import&quot;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="va">VHD_BLOB_NAME</span><span class="op">=</span><span class="st">&quot;setco-dc02-os.vhd&quot;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Get your storage account key (for destination)</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="va">STORAGE_KEY</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> storage account keys list <span class="dt">\</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$YOUR_STORAGE_ACCOUNT</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;[0].value&quot;</span> <span class="at">-o</span> tsv<span class="va">)</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Build destination URL</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="va">DEST_URL</span><span class="op">=</span><span class="st">&quot;https://</span><span class="va">${YOUR_STORAGE_ACCOUNT}</span><span class="st">.blob.core.windows.net/</span><span class="va">${YOUR_CONTAINER}</span><span class="st">/</span><span class="va">${VHD_BLOB_NAME}</span><span class="st">&quot;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy VHD from vendor to your storage</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="ex">azcopy</span> copy <span class="dt">\</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;</span><span class="va">$VENDOR_VHD_URL</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;</span><span class="va">${DEST_URL}</span><span class="st">?</span><span class="va">${STORAGE_KEY}</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">--blob-type</span> PageBlob</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Or use SAS token for destination (if you prefer)</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate your storage SAS first, then:</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co"># azcopy copy &quot;$VENDOR_VHD_URL&quot; &quot;${DEST_URL}?YOUR_SAS&quot; --blob-type PageBlob</span></span></code></pre></div>
<p><strong>Monitor copy progress:</strong> - AzCopy will show progress
in terminal - Copying ~127GB OS VHD takes 30 min - 2 hours depending on
network</p>
<h4 id="verify-vhd-copied-successfully">2.3 Verify VHD Copied
Successfully</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List blobs to confirm VHD arrived</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> storage blob list <span class="dt">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--account-name</span> setcodcvhdstorage <span class="dt">\</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--container-name</span> vhd-import <span class="dt">\</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--output</span> table <span class="dt">\</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--auth-mode</span> login</span></code></pre></div>
<p><strong>Expected output:</strong></p>
<pre><code>Name                 Blob Type    Length
-------------------  -----------  --------
setco-dc02-os.vhd    PageBlob     ~127 GB</code></pre>
<h4 id="create-os-managed-disk-from-vhd">2.4 Create OS Managed Disk from
VHD</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get VHD URL from your storage</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="va">VHD_URL</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> storage blob url <span class="dt">\</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--account-name</span> setcodcvhdstorage <span class="dt">\</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--container-name</span> vhd-import <span class="dt">\</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> setco-dc02-os.vhd <span class="dt">\</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--auth-mode</span> login <span class="dt">\</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--output</span> tsv<span class="va">)</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the OS disk name</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="va">OS_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>  <span class="co"># Choose a name for the new OS disk</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create OS managed disk from VHD</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk create <span class="dt">\</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">--resource-group</span> DataCenter <span class="dt">\</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> <span class="st">&quot;</span><span class="va">$OS_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">--location</span> eastus <span class="dt">\</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Premium_LRS <span class="dt">\</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source</span> <span class="st">&quot;</span><span class="va">$VHD_URL</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">--os-type</span> Windows <span class="dt">\</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">--zone</span> 3</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Monitor creation status</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk show <span class="dt">\</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">--resource-group</span> DataCenter <span class="dt">\</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> <span class="st">&quot;</span><span class="va">$OS_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:diskSizeGb, State:provisioningState}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<p><strong>Wait for:</strong> <code>State: Succeeded</code> (takes 10-20
minutes)</p>
<h3 id="checklist-1">Checklist:</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Vendor provides OS VHD SAS
URL</label></li>
<li><label><input type="checkbox"></input>Storage account exists in your
subscription</label></li>
<li><label><input type="checkbox"></input>Container created for VHD
import</label></li>
<li><label><input type="checkbox"></input>AzCopy installed (download from
https://aka.ms/downloadazcopy-v10)</label></li>
<li><label><input type="checkbox"></input>VHD copied from vendor storage to
your storage</label></li>
<li><label><input type="checkbox"></input>VHD verified in your storage
container</label></li>
<li><label><input type="checkbox"></input>OS managed disk created from
VHD</label></li>
<li><label><input type="checkbox"></input>Disk status shows
‚ÄúSucceeded‚Äù</label></li>
<li><label><input type="checkbox"></input>Note the disk name for Phase
4</label></li>
</ul>
<p><strong>‚è±Ô∏è Estimated Time:</strong> 1-3 hours (VHD copy 30min-2hrs +
disk creation 10-20min)</p>
<hr />
<h2 id="phase-3-create-data-disk-from-fs-snapshot">PHASE 3: Create Data
Disk from FS Snapshot</h2>
<h3 id="only-start-after-robocopy-complete">‚ö†Ô∏è ONLY START AFTER Robocopy
Complete!</h3>
<p><strong>Check robocopy completion via NinjaOne on DC:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a># View last 30 lines of log</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>powershell <span class="at">-command</span> <span class="st">&quot;Get-Content C:\Logs\robocopy.log -Tail 30&quot;</span></span></code></pre></div>
<p><strong>Look for:</strong></p>
<pre><code>             Total    Copied   Skipped  Mismatch    FAILED    Extras
  Files :   343197    343197         0         0         0         0</code></pre>
<p><strong>FAILED should be 0 (or only system files)</strong></p>
<h3 id="verify-data-on-fs">Verify Data on FS</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># On FS - verify all data arrived</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Get-ChildItem</span> F<span class="op">:</span>\Backup <span class="op">-</span>Recurse <span class="op">|</span> <span class="fu">Measure-Object</span> <span class="op">-</span>Property Length <span class="op">-</span>Sum</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check folders</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">Get-ChildItem</span> F<span class="op">:</span>\Backup <span class="op">-</span>Directory <span class="op">|</span> <span class="fu">Select-Object</span> Name</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Expected folders:</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># FTP Data, HomeDirs, PostClosing, Qbooks, SeaCrestScans,</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co"># SetcoDocs, Versacheck, Whole Life Fitness, NTSYS</span></span></code></pre></div>
<h3 id="create-snapshot-from-fs-data-disk-azure-cli">Create Snapshot
from FS Data Disk (Azure CLI)</h3>
<p><strong>This is the NEW workflow - create snapshot directly from FS
disk!</strong></p>
<h4 id="step-1-identify-fs-data-disk">Step 1: Identify FS Data Disk</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List all disks in DataCenter resource group</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk list <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;[].{Name:name, Size:diskSizeGb, Owner:managedBy}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<p><strong>Find the 1TB disk attached to FS (F: drive)</strong></p>
<p>Example output:</p>
<pre><code>Name                    Size    Owner
----------------------  ------  -------------------------
FS_DataDisk_F          1024    /subscriptions/.../FS-VM</code></pre>
<p><strong>Set the disk name:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="va">FS_DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;FS_DataDisk_F&quot;</span>  <span class="co"># Replace with actual name</span></span></code></pre></div>
<h4 id="step-2-create-snapshot-from-fs-disk">Step 2: Create Snapshot
from FS Disk</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create snapshot with today&#39;s date</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="va">SNAPSHOT_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02-Data-Snapshot-</span><span class="va">$(</span><span class="fu">date</span> +%Y-%m-%d<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> snapshot create <span class="dt">\</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source</span> <span class="st">&quot;</span><span class="va">$FS_DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Premium_LRS</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Snapshot created: </span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span></span></code></pre></div>
<p><strong>This takes 20-40 minutes depending on disk size.</strong></p>
<h4 id="step-3-verify-snapshot">Step 3: Verify Snapshot</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check snapshot status</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> snapshot show <span class="at">-g</span> DataCenter <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:diskSizeGb, State:provisioningState}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<p><strong>Expected:</strong> <code>State: Succeeded</code></p>
<h4 id="step-4-create-managed-disk-from-snapshot">Step 4: Create Managed
Disk from Snapshot</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Disk name for new DC</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02_DataDisk_NEW&quot;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create managed disk from snapshot</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk create <span class="dt">\</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">-l</span> eastus <span class="dt">\</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Premium_LRS <span class="dt">\</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">--zone</span> 3</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Creating data disk from snapshot...&quot;</span></span></code></pre></div>
<p><strong>This takes 10-30 minutes.</strong></p>
<h4 id="step-5-monitor-disk-creation">Step 5: Monitor Disk Creation</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check disk status</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk show <span class="at">-g</span> DataCenter <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:diskSizeGb, State:provisioningState, SKU:sku.name}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<p><strong>Wait for:</strong> <code>State: Succeeded</code></p>
<h3 id="all-commands-together-copypaste-ready">ALL COMMANDS TOGETHER
(Copy/Paste Ready):</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Data Disk from FS Snapshot</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 1: Identify FS data disk</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk list <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;[].{Name:name, Size:diskSizeGb, Owner:managedBy}&quot;</span> <span class="at">-o</span> table</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 2: Set the FS disk name (REPLACE WITH ACTUAL NAME!)</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="va">FS_DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>  <span class="co"># &lt;-- UPDATE THIS after identifying!</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 3: Create snapshot</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="va">SNAPSHOT_NAME</span><span class="op">=</span><span class="st">&quot;&lt;SnapshotName&gt;&quot;</span>  <span class="co"># Example: SETCO-DC02-Data-Snapshot-2025-11-23</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> snapshot create <span class="dt">\</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source</span> <span class="st">&quot;</span><span class="va">$FS_DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Premium_LRS</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 4: Verify snapshot</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> snapshot show <span class="at">-g</span> DataCenter <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:diskSizeGb, State:provisioningState}&quot;</span> <span class="at">-o</span> table</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 5: Create managed disk from snapshot</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>  <span class="co"># Choose a name for the new data disk</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk create <span class="dt">\</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">-g</span> DataCenter <span class="dt">\</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">-l</span> eastus <span class="dt">\</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">--source</span> <span class="st">&quot;</span><span class="va">$SNAPSHOT_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">--sku</span> Premium_LRS <span class="dt">\</span></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">--zone</span> 3</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Step 6: Monitor disk creation</span></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk show <span class="at">-g</span> DataCenter <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:diskSizeGb, State:provisioningState, SKU:sku.name}&quot;</span> <span class="at">-o</span> table</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Data disk ready: </span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="checklist-2">Checklist:</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>‚úÖ Robocopy complete (verified on
DC)</label></li>
<li><label><input type="checkbox"></input>Data verified on F:on
FS</label></li>
<li><label><input type="checkbox"></input>FS data disk identified (e.g.,
FS_DataDisk_F)</label></li>
<li><label><input type="checkbox"></input>Snapshot created from FS
disk</label></li>
<li><label><input type="checkbox"></input>Snapshot status:
‚ÄúSucceeded‚Äù</label></li>
<li><label><input type="checkbox"></input>Managed disk created from
snapshot</label></li>
<li><label><input type="checkbox"></input>Disk status:
‚ÄúSucceeded‚Äù</label></li>
<li><label><input type="checkbox"></input><strong>Both OS and Data disks ready
for VM build</strong></label></li>
</ul>
<p><strong>‚è±Ô∏è Estimated Time:</strong> 1-2 hours (snapshot creation +
disk creation)</p>
<hr />
<h2 id="phase-4-build-new-dc-vm-manual-azure-cli">PHASE 4: Build New DC
VM (Manual Azure CLI)</h2>
<h3 id="all-prerequisites-met">All Prerequisites Met:</h3>
<ul>
<li>‚úÖ OS Disk ready (from vendor VHD)</li>
<li>‚úÖ Data Disk ready (from FS snapshot)</li>
<li>‚úÖ Network infrastructure ready (VNet/Subnet exist)</li>
</ul>
<h3 id="your-actual-variables">YOUR ACTUAL VARIABLES:</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set these variables</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="va">RESOURCE_GROUP</span><span class="op">=</span><span class="st">&quot;DataCenter&quot;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="va">LOCATION</span><span class="op">=</span><span class="st">&quot;eastus&quot;</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="va">VM_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02&quot;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="va">VM_SIZE</span><span class="op">=</span><span class="st">&quot;Standard_D4s_v5&quot;</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="va">ZONE</span><span class="op">=</span><span class="st">&quot;3&quot;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Disk names (you&#39;ll set these after creating disks in Phase 3 &amp; 4)</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="va">OS_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>      <span class="co"># OS disk created from vendor VHD</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>    <span class="co"># Data disk created from FS snapshot</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Network (existing)</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="va">TARGET_VNET</span><span class="op">=</span><span class="st">&quot;DataCenter_vNet&quot;</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="va">TARGET_SUBNET</span><span class="op">=</span><span class="st">&quot;DataCenter_Subnet&quot;</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="va">NIC_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02-nic2&quot;</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Subnet range (for reference)</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="va">SUBNET_RANGE</span><span class="op">=</span><span class="st">&quot;10.20.1.x/24&quot;</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a><span class="va">PREV_IP</span><span class="op">=</span><span class="st">&quot;10.20.1.12&quot;</span>  <span class="co"># IP from previous build</span></span></code></pre></div>
<h3 id="step-1-get-disk-ids">Step 1: Get Disk IDs</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resolve disk IDs</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="va">OS_DISK_ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> disk show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$OS_DISK_NAME</span><span class="st">&quot;</span> <span class="at">--query</span> id <span class="at">-o</span> tsv<span class="va">)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> disk show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="at">--query</span> id <span class="at">-o</span> tsv<span class="va">)</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;OS_DISK_ID=</span><span class="va">$OS_DISK_ID</span><span class="st">&quot;</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;DATA_DISK_ID=</span><span class="va">$DATA_DISK_ID</span><span class="st">&quot;</span></span></code></pre></div>
<h3 id="step-2-create-network-interface">Step 2: Create Network
Interface</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if NIC already exists</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="ot">! </span><span class="ex">az</span> network nic show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="op">&amp;&gt;</span>/dev/null<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">echo</span> <span class="st">&quot;Creating NIC...&quot;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create NIC (with or without static IP)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="bu">[</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$STATIC_PRIVATE_IP</span><span class="st">&quot;</span> <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">az</span> network nic create <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">--vnet-name</span> <span class="st">&quot;</span><span class="va">$TARGET_VNET</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">--subnet</span> <span class="st">&quot;</span><span class="va">$TARGET_SUBNET</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">--private-ip-address</span> <span class="st">&quot;</span><span class="va">$STATIC_PRIVATE_IP</span><span class="st">&quot;</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="ex">az</span> network nic create <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">--vnet-name</span> <span class="st">&quot;</span><span class="va">$TARGET_VNET</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">--subnet</span> <span class="st">&quot;</span><span class="va">$TARGET_SUBNET</span><span class="st">&quot;</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">fi</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="co"># View current IP on NIC</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> network nic show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;ipConfigurations[0].privateIpAddress&quot;</span> <span class="at">-o</span> tsv</span></code></pre></div>
<h3 id="step-3-create-vm-from-os-disk">Step 3: Create VM from OS
Disk</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create VM</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm create <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--attach-os-disk</span> <span class="st">&quot;</span><span class="va">$OS_DISK_ID</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--os-type</span> Windows <span class="dt">\</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--nics</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--zone</span> <span class="st">&quot;</span><span class="va">$ZONE</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">--size</span> <span class="st">&quot;</span><span class="va">$VM_SIZE</span><span class="st">&quot;</span></span></code></pre></div>
<p><strong>This will take 2-4 minutes.</strong></p>
<h3 id="step-4-attach-data-disk">Step 4: Attach Data Disk</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Attach data disk at LUN 1</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm disk attach <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">--vm-name</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_ID</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">--lun</span> 1</span></code></pre></div>
<h3 id="step-5-verify-vm-configuration">Step 5: Verify VM
Configuration</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># VM details</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;VM Configuration:&quot;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, Size:hardwareProfile.vmSize, Zone:zones[0]}&quot;</span> <span class="at">-o</span> table</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Network</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Private IP:&quot;</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> network nic show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;ipConfigurations[0].privateIpAddress&quot;</span> <span class="at">-o</span> tsv</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Disks</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;&quot;</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Attached Disks:&quot;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;storageProfile.dataDisks[].{LUN:lun,Name:name}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<h3 id="step-6-start-vm">Step 6: Start VM</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Start the VM</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm start <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check status</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm get-instance-view <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;instanceView.statuses[?starts_with(code, &#39;PowerState&#39;)].displayStatus&quot;</span> <span class="at">-o</span> tsv</span></code></pre></div>
<h3 id="all-commands-together-copypaste-ready-1">ALL COMMANDS TOGETHER
(Copy/Paste Ready):</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co"># SETCO-DC02 Rebuild - Manual Commands</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ===========================</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Variables</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="va">RESOURCE_GROUP</span><span class="op">=</span><span class="st">&quot;DataCenter&quot;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="va">LOCATION</span><span class="op">=</span><span class="st">&quot;eastus&quot;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="va">VM_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02&quot;</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="va">VM_SIZE</span><span class="op">=</span><span class="st">&quot;Standard_D4s_v5&quot;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="va">ZONE</span><span class="op">=</span><span class="st">&quot;3&quot;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="va">OS_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>           <span class="co"># Set after creating OS disk</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_NAME</span><span class="op">=</span><span class="st">&quot;&lt;DiskName&gt;&quot;</span>         <span class="co"># Set after creating data disk</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="va">TARGET_VNET</span><span class="op">=</span><span class="st">&quot;DataCenter_vNet&quot;</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="va">TARGET_SUBNET</span><span class="op">=</span><span class="st">&quot;DataCenter_Subnet&quot;</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="va">NIC_NAME</span><span class="op">=</span><span class="st">&quot;SETCO-DC02-nic2&quot;</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Get disk IDs</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="va">OS_DISK_ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> disk show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$OS_DISK_NAME</span><span class="st">&quot;</span> <span class="at">--query</span> id <span class="at">-o</span> tsv<span class="va">)</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="va">DATA_DISK_ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">az</span> disk show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_NAME</span><span class="st">&quot;</span> <span class="at">--query</span> id <span class="at">-o</span> tsv<span class="va">)</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;OS Disk: </span><span class="va">$OS_DISK_ID</span><span class="st">&quot;</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Data Disk: </span><span class="va">$DATA_DISK_ID</span><span class="st">&quot;</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Create NIC if doesn&#39;t exist</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="ot">! </span><span class="ex">az</span> network nic show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="op">&amp;&gt;</span>/dev/null<span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  <span class="ex">az</span> network nic create <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vnet-name</span> <span class="st">&quot;</span><span class="va">$TARGET_VNET</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">--subnet</span> <span class="st">&quot;</span><span class="va">$TARGET_SUBNET</span><span class="st">&quot;</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Create VM from OS disk</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm create <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">--attach-os-disk</span> <span class="st">&quot;</span><span class="va">$OS_DISK_ID</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">--os-type</span> Windows <span class="dt">\</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">--nics</span> <span class="st">&quot;</span><span class="va">$NIC_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">--zone</span> <span class="st">&quot;</span><span class="va">$ZONE</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">--size</span> <span class="st">&quot;</span><span class="va">$VM_SIZE</span><span class="st">&quot;</span></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Attach data disk</span></span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm disk attach <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">--vm-name</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">--name</span> <span class="st">&quot;</span><span class="va">$DATA_DISK_ID</span><span class="st">&quot;</span> <span class="dt">\</span></span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">--lun</span> 1</span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Start VM</span></span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm start <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm show <span class="at">-g</span> <span class="st">&quot;</span><span class="va">$RESOURCE_GROUP</span><span class="st">&quot;</span> <span class="at">-n</span> <span class="st">&quot;</span><span class="va">$VM_NAME</span><span class="st">&quot;</span> <span class="at">-d</span> <span class="dt">\</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">--query</span> <span class="st">&quot;{Name:name, PowerState:powerState, PrivateIP:privateIps}&quot;</span> <span class="at">-o</span> table</span></code></pre></div>
<h3 id="checklist-3">Checklist:</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Variables set correctly</label></li>
<li><label><input type="checkbox"></input>Disk IDs resolved</label></li>
<li><label><input type="checkbox"></input>NIC created (reuses existing
SETCO-DC02-nic2)</label></li>
<li><label><input type="checkbox"></input>VM created from OS disk</label></li>
<li><label><input type="checkbox"></input>Data disk attached at LUN
1</label></li>
<li><label><input type="checkbox"></input>VM started successfully</label></li>
<li><label><input type="checkbox"></input>Can see private IP:
_________________</label></li>
</ul>
<p><strong>‚è±Ô∏è Estimated Time:</strong> 10-15 minutes</p>
<hr />
<h2 id="phase-5-initial-configuration">PHASE 5: Initial
Configuration</h2>
<h3 id="connect-to-new-dc">Connect to New DC</h3>
<p><strong>RDP to the VM:</strong></p>
<pre><code>mstsc /v:&lt;PUBLIC_IP&gt;</code></pre>
<p><strong>Login with:</strong> - Username:
<code>SOUTHERN\Administrator</code> - Password: [Original DC admin
password]</p>
<h3 id="verify-data-disk-online">Verify Data Disk Online</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check disk status</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>Get<span class="op">-</span>Disk</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>Get<span class="op">-</span>Volume</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Bring data disk online if needed</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>Set<span class="op">-</span>Disk <span class="op">-</span>Number 1 <span class="op">-</span>IsOffline <span class="va">$false</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify F: drive accessible</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">Get-ChildItem</span> F<span class="op">:</span>\ <span class="op">-</span>Directory</span></code></pre></div>
<p><strong>Expected folders on F::</strong> - FTP Data, HomeDirs,
PostClosing, Qbooks, SeaCrestScans, SetcoDocs, Versacheck, Whole Life
Fitness, NTSYS</p>
<h3 id="recreate-file-shares">Recreate File Shares</h3>
<p><strong>Copy scripts to C:1 on new DC:</strong> -
1-Setup-Directories-F-Drive.ps1 - 2-Set-NTFS-Permissions-F-Drive.ps1 -
3-Create-SMB-Shares-F-Drive.ps1 -
4-Validate-Configuration-F-Drive.ps1</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cd</span> C<span class="op">:</span>\ps1</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Run scripts in order</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="op">.</span>\1<span class="op">-</span>Setup<span class="op">-</span>Directories<span class="op">-</span>F<span class="op">-</span>Drive<span class="op">.</span><span class="fu">ps1</span>  <span class="co"># Shows &quot;Already exists&quot;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="op">.</span>\2<span class="op">-</span>Set<span class="op">-</span>NTFS<span class="op">-</span>Permissions<span class="op">-</span>F<span class="op">-</span>Drive<span class="op">.</span><span class="fu">ps1</span>  <span class="co"># Apply permissions</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="op">.</span>\3<span class="op">-</span>Create<span class="op">-</span>SMB<span class="op">-</span>Shares<span class="op">-</span>F<span class="op">-</span>Drive<span class="op">.</span><span class="fu">ps1</span>  <span class="co"># Create shares</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="op">.</span>\4<span class="op">-</span>Validate<span class="op">-</span>Configuration<span class="op">-</span>F<span class="op">-</span>Drive<span class="op">.</span><span class="fu">ps1</span>  <span class="co"># Validate</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Verify shares</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>Get<span class="op">-</span>SmbShare <span class="op">|</span> <span class="fu">Format-Table</span> Name<span class="op">,</span> Path</span></code></pre></div>
<h3 id="run-health-check">Run Health Check</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a># DC diagnostic</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>dcdiag <span class="at">/v</span> <span class="kw">&gt;</span> C:\Logs\dcdiag.txt</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>notepad C:\Logs\dcdiag.txt</span></code></pre></div>
<h3 id="checklist-4">Checklist:</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>RDP connection
successful</label></li>
<li><label><input type="checkbox"></input>F:¬†drive online and
accessible</label></li>
<li><label><input type="checkbox"></input>All folders visible on F:<br />
</label></li>
<li><label><input type="checkbox"></input>All 11 shares created</label></li>
<li><label><input type="checkbox"></input>dcdiag passes</label></li>
</ul>
<p><strong>‚è±Ô∏è Estimated Time:</strong> 1-2 hours</p>
<hr />
<h2 id="quick-command-reference">Quick Command Reference</h2>
<h3 id="via-ninjaone-on-source-dc">Via NinjaOne on Source DC</h3>
<p><strong>Check robocopy progress:</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>powershell <span class="at">-command</span> <span class="st">&quot;Get-Content C:\Logs\robocopy.log -Tail 50 -Wait&quot;</span></span></code></pre></div>
<p><strong>Check robocopy completion:</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>powershell <span class="at">-command</span> <span class="st">&quot;Get-Content C:\Logs\robocopy.log -Tail 30&quot;</span></span></code></pre></div>
<h3 id="on-your-fs">On Your FS</h3>
<p><strong>Monitor data arrival:</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Get-ChildItem</span> F<span class="op">:</span>\Backup <span class="op">-</span>Recurse <span class="op">|</span> <span class="fu">Measure-Object</span> <span class="op">-</span>Property Length <span class="op">-</span>Sum</span></code></pre></div>
<h3 id="azure-commands">Azure Commands</h3>
<p><strong>List resources:</strong></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> resource list <span class="at">--resource-group</span> RG-Setco-DC <span class="at">--output</span> table</span></code></pre></div>
<p><strong>Check disk status:</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> disk show <span class="at">--resource-group</span> RG-Setco-DC <span class="at">--name</span> DC-Setco-OS-Disk <span class="at">--query</span> provisioningState</span></code></pre></div>
<p><strong>VM status:</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">az</span> vm get-instance-view <span class="at">--resource-group</span> RG-Setco-DC <span class="at">--name</span> DC-Setco-NewTenant</span></code></pre></div>
<hr />
<h2 id="timeline-summary">Timeline Summary</h2>
<table>
<thead>
<tr class="header">
<th>Phase</th>
<th>Duration</th>
<th>Your Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1. Robocopy (via NinjaOne)</td>
<td>6-12 hrs</td>
<td>YOU run delta sync</td>
</tr>
<tr class="even">
<td>2. Copy OS VHD</td>
<td>1-3 hrs</td>
<td>Copy from vendor storage + create disk</td>
</tr>
<tr class="odd">
<td>3. Create data disk</td>
<td>1-2 hrs</td>
<td>Snapshot + create disk</td>
</tr>
<tr class="even">
<td>4. Build VM</td>
<td>10-15 min</td>
<td>Create VM from both disks</td>
</tr>
<tr class="odd">
<td>5. Configure</td>
<td>1-2 hrs</td>
<td>File shares/validation</td>
</tr>
<tr class="even">
<td><strong>Total Elapsed</strong></td>
<td><strong>9-19 hrs</strong></td>
<td><strong>Over 1-2 days</strong></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="vendor-coordination">Vendor Coordination</h2>
<h3 id="what-you-need-from-vendor">What You Need from Vendor:</h3>
<table>
<thead>
<tr class="header">
<th>Item</th>
<th>When</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Confirmation they‚Äôll export OS VHD</td>
<td>Before starting</td>
</tr>
<tr class="even">
<td>OS VHD uploaded to your storage</td>
<td>Phase 3</td>
</tr>
<tr class="odd">
<td>Original domain admin password</td>
<td>Before VM start</td>
</tr>
<tr class="even">
<td>Decommission old DC</td>
<td>After 2+ weeks</td>
</tr>
</tbody>
</table>
<h3 id="what-you-tell-vendor">What You Tell Vendor:</h3>
<table>
<thead>
<tr class="header">
<th>Item</th>
<th>When</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>‚ÄúI‚Äôm running robocopy now via NinjaOne‚Äù</td>
<td>Phase 1 start</td>
</tr>
<tr class="even">
<td>SAS token for VHD upload</td>
<td>Phase 2</td>
</tr>
<tr class="odd">
<td>‚ÄúRobocopy complete, please export OS VHD‚Äù</td>
<td>Phase 3</td>
</tr>
<tr class="even">
<td>‚ÄúNew DC is live, ready to decommission old‚Äù</td>
<td>Post-cutover</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="success-criteria">Success Criteria</h2>
<ul class="task-list">
<li><label><input type="checkbox"></input>Connected to DC via
NinjaOne</label></li>
<li><label><input type="checkbox"></input>Robocopy complete
(verified)</label></li>
<li><label><input type="checkbox"></input>All data on F:on FS</label></li>
<li><label><input type="checkbox"></input>OS VHD imported</label></li>
<li><label><input type="checkbox"></input>Data disk created</label></li>
<li><label><input type="checkbox"></input>VM boots successfully</label></li>
<li><label><input type="checkbox"></input>Can RDP to VM</label></li>
<li><label><input type="checkbox"></input>F:¬†drive online with all
folders</label></li>
<li><label><input type="checkbox"></input>AD services running</label></li>
<li><label><input type="checkbox"></input>DNS working</label></li>
<li><label><input type="checkbox"></input>11 shares created</label></li>
<li><label><input type="checkbox"></input>dcdiag passes</label></li>
<li><label><input type="checkbox"></input>Client can access
shares</label></li>
<li><label><input type="checkbox"></input>Users can authenticate</label></li>
</ul>
<hr />
<p><strong>Your Workflow Version 3.0</strong> <strong>Created:</strong>
2025-11-17 <strong>Access Method:</strong> NinjaOne Remote Control
<strong>You Control:</strong> Everything except vendor‚Äôs Azure
tenant</p>
</body>
</html>
